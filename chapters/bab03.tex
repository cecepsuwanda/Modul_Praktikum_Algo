\documentclass[../main.tex]{subfiles}
\begin{document}
\chapter{Operator \& Ekspresi}
\section{Operator Aritmetika, Relasional, Logika}
Operator aritmetika (\texttt{+}, \texttt{-}, \texttt{*}, pembagian, sisa), relasional (\texttt{<}, \texttt{<=}, \texttt{==}/\texttt{=}, \texttt{>}, \texttt{>=}), dan logika (\texttt{and}/\texttt{or}/\texttt{not} atau \texttt{\&\&}/\texttt{||}/\texttt{!}) adalah dasar evaluasi ekspresi. Perhatikan perbedaan pembagian bilangan bulat vs pecahan dan konvensi operator kesetaraan antarbahasa \parencite{pascal-tutorial-wikibooks,gnu-c-manual,cpp-reference}.

Gunakan tanda kurung untuk menegaskan maksud pada ekspresi panjang. Pecah ekspresi kompleks menjadi variabel perantara bernama agar mudah diuji. Rujuk tabel resmi operator untuk detail prioritas dan asosiasi \parencite{gnu-c-manual,cpp-op-precedence,c-op-precedence}.

\subsection{Ringkasan Operator Umum}
\begin{table}[h]
  \centering
  \caption{Operator umum lintas bahasa (ringkas)}
  \begin{tabular}{@{}llll@{}}
    \toprule
    Kategori & Pascal & C & C++ \\
    \midrule
    Aritmetika & \texttt{+ - * / div mod} & \texttt{+ - * / %} & \texttt{+ - * / %} \\
    Relasional & \texttt{= <> < <= > >=} & \texttt{== != < <= > >=} & sama dengan C \\
    Logika & \texttt{and or not} & \texttt{&& || !} & sama dengan C \\
    Penugasan & \texttt{:=} & \texttt{=} & \texttt{=} \\
    Inkremen & (tidak ada) & \texttt{++ --} & \texttt{++ --} \\
    \bottomrule
  \end{tabular}
\end{table}

\subsection{Short-circuit dan Efek Samping}
Di C/C++, \texttt{&&} dan \texttt{||} melakukan evaluasi singkat (operan kanan hanya dievaluasi bila perlu). Hindari efek samping pada operan yang mungkin tidak dievaluasi \parencite{gnu-c-manual,cpp-reference}.
\begin{lstlisting}[language=C, caption={Short-circuit di C}]
int expensive();
if (ptr != NULL && expensive()) {
  // aman: expensive() hanya dipanggil jika ptr != NULL
}
\end{lstlisting}
Pada Pascal, kebijakan evaluasi boolean dapat bergantung opsi/ mode kompiler. Hindari mengandalkan evaluasi kondisi untuk mencegah error; lebih aman tulis pemeriksaan bertahap \parencite{free-pascal-docs}.
\begin{lstlisting}[language=Pascal, caption={Pemeriksaan bertahap di Pascal}]
if b <> 0 then begin
  if a / b > 1 then Writeln('ok');
end;
\end{lstlisting}

\section{Operator Bitwise}
Operator bitwise mengoperasikan representasi biner: \texttt{\&}, \texttt{|}, \texttt{\^{}}, \texttt{\~{}} (not), \texttt{<<}, \texttt{>>} di C/C++; di Pascal gunakan \texttt{and}, \texttt{or}, \texttt{xor}, \texttt{not}, serta \texttt{shl}/\texttt{shr}. Gunakan untuk \emph{flags}, protokol, dan optimasi bit-level \parencite{free-pascal-docs,iso-c-draft-n1570,cpp-reference}.

\subsection{Contoh Flags}
\begin{lstlisting}[language=C, caption={Bit flags di C}]
#include <stdio.h>
enum { READ = 1<<0, WRITE = 1<<1, EXEC = 1<<2 };
int main(void){
  unsigned mask = READ | WRITE;        // set dua bit
  mask &= ~WRITE;                      // clear satu bit
  if (mask & READ) printf("READ on\n");
}
\end{lstlisting}

\begin{lstlisting}[language=Pascal, caption={Pergeseran dan bitwise di Pascal}]
var mask: longint; begin
  mask := (1 shl 0) or (1 shl 1); // set bit 0 dan 1
  mask := mask and not (1 shl 1); // clear bit 1
  if (mask and (1 shl 0)) <> 0 then Writeln('READ on');
end.
\end{lstlisting}

Hati-hati saat pergeseran pada tipe bertanda: pergeseran kanan dapat memperluas tanda pada beberapa implementasi. Batasi jumlah pergeseran agar tidak melebihi lebar tipe \parencite{iso-c-draft-n1570,cpp-reference}.

\section{Precedence dan Asosiasi}
Precedence dan asosiasi menentukan urutan evaluasi tanpa tanda kurung. Variasi kecil antarbahasa dapat memicu salah tafsir; tambahkan tanda kurung untuk memperjelas maksud \parencite{gnu-c-manual,cpp-op-precedence,c-op-precedence}.

\subsection{Sketsa Pohon Ekspresi}
\begin{figure}[h]
  \centering
  \begin{tikzpicture}[level distance=1.1cm, sibling distance=2.2cm]
    \tikzstyle{n}=[draw, rounded corners, minimum width=9mm, align=center]
    \node[n]{&&}
      child{ node[n]{==}
        child{ node[n]{+}
          child{ node[n]{a} }
          child{ node[n]{*}
            child{ node[n]{b} }
            child{ node[n]{c} }
          }
        }
        child{ node[n]{d} }
      }
      child{ node[n]{e} };
  \end{tikzpicture}
  \caption{Precedence: \texttt{*} > \texttt{+} > \texttt{==} > \texttt{&&}}
\end{figure}

Uji dengan menambahkan atau menghapus tanda kurung dan bandingkan hasilnya di masing-masing bahasa.

\section{Operator Overloading (Pendahuluan)}
Di C++, \emph{operator overloading} mendefinisikan makna operator untuk tipe pengguna. Gunakan saat notasi infiks benar-benar memperjelas maksud dan konsisten secara aljabar \parencite{cpp-reference,cpp-operator-overloading}.

\begin{lstlisting}[language=C++, caption={Contoh singkat operator+ pada vektor 2D}]
#include <iostream>
struct Vec2 { double x, y; };
Vec2 operator+(const Vec2& a, const Vec2& b) { return {a.x + b.x, a.y + b.y}; }
std::ostream& operator<<(std::ostream& os, const Vec2& v){ return os << '(' << v.x << ',' << v.y << ')'; }
int main(){ Vec2 a{1,2}, b{3,4}; std::cout << (a+b) << "\n"; }
\end{lstlisting}

Jaga konsistensi dengan operasi terkait (mis. \texttt{+=}, perbandingan) dan perhatikan biaya komputasi.

\subsection{Catatan Eksekusi (OnlineGDB, Lazarus, Code::Blocks)}
\begin{itemize}
  \item \textbf{OnlineGDB}: buka \url{https://www.onlinegdb.com/}, pilih bahasa yang sesuai (Pascal/C/C++), tempel contoh, lalu Run.
  \item \textbf{Lazarus (Pascal)}: buat Console Application, tempel contoh Pascal, Run.
  \item \textbf{Code::Blocks (C/C++)}: Console application, pilih C/C++, tempel ke \texttt{main.c}/\texttt{main.cpp}, Build \& Run.
\end{itemize}
\end{document}
