% Universitas Bale Bandung - Buku Modul Praktikum
% Algoritma dan Pemrograman (S1 Sistem Informasi)
\documentclass[12pt,a4paper,oneside]{book}

% Encoding and language
\usepackage[T1]{fontenc}
\usepackage[utf8]{inputenc}
\usepackage[english,indonesian]{babel}
\usepackage{lmodern}
\usepackage{csquotes}
% Set fallback quote style for Indonesian (use English style)
\DeclareQuoteStyle{indonesian}
  {\quotedblbase}
  {\textquotedblleft}
  [0.05em]
  {\quotesinglbase}
  {\fixligatures\textquoteleft}

% Page layout
\usepackage{geometry}
\geometry{margin=1in}
\usepackage{setspace}
\onehalfspacing

% Header and footer with horizontal lines
\usepackage{fancyhdr}
\pagestyle{fancy}
\setlength{\headheight}{15pt}
\fancyhf{} % Clear all header and footer fields
\fancyhead[L]{\nouppercase{\leftmark}} % Chapter name on left
\fancyhead[R]{\thepage} % Page number on right
\fancyfoot[C]{} % Footer kosong, hanya garis
\renewcommand{\headrulewidth}{0.5pt} % Horizontal line in header
\renewcommand{\footrulewidth}{0.5pt} % Horizontal line in footer

% Style for chapter first page (plain style)
\fancypagestyle{plain}{%
  \fancyhf{}
  \fancyfoot[C]{\thepage} % Nomor halaman di footer untuk halaman judul bab
  \renewcommand{\headrulewidth}{0pt} % No header line
  \renewcommand{\footrulewidth}{0.5pt} % Footer line only
}

% Graphics, tables, code listings
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{float}
\usepackage{listings}
\usepackage{xcolor}
\usepackage{amssymb}
\usepackage{hyperref}
\hypersetup{
  breaklinks=true,
  colorlinks=true,
  linkcolor=blue,
  citecolor=blue,
  urlcolor=blue
}
\usepackage{cleveref}
% Diagrams
\usepackage{tikz}
\usetikzlibrary{arrows.meta,positioning,shapes.geometric,trees}

% Code listing style
\lstdefinestyle{codestyle}{
  basicstyle=\ttfamily\small,
  numbers=left,
  numberstyle=\tiny, numbersep=8pt,
  keywordstyle=\color{blue!70!black},
  stringstyle=\color{green!40!black},
  commentstyle=\color{black!50},
  showstringspaces=false,
  frame=single,
  breaklines=true,
  columns=fullflexible,
  float=H,
  floatplacement=H
}
\lstset{style=codestyle}

% Bibliography (biblatex) - IEEE numeric style
\usepackage[backend=biber,style=ieee,sorting=none,autolang=other,maxbibnames=99]{biblatex}
\addbibresource{references.bib}

% Explicitly set bibliography language to English
\DeclareLanguageMapping{indonesian}{english}

% Configure URL breaking in bibliography
\setcounter{biburlnumpenalty}{7000}
\setcounter{biburlucpenalty}{7000}
\setcounter{biburllcpenalty}{7000}

% Allow more flexibility in line breaking
\emergencystretch=2em
\tolerance=2000
\hfuzz=0.5pt

% Subfiles per chapter
\usepackage{subfiles}

% Metadata
\title{Buku Praktikum: Pascal, C \& C++\\Algoritma dan Pemrograman\\Program Studi S1 Sistem Informasi\\Fakultas Teknologi Informasi\\Universitas Bale Bandung}
\author{Tim Pengajar Algoritma dan Pemrograman}
\date{\today}

\begin{document}
\frontmatter
\hypersetup{pageanchor=false}
\maketitle
\hypersetup{pageanchor=true}
\pagenumbering{roman}
\tableofcontents

\cleardoublepage
\mainmatter
% Struktur mengikuti RPS (13 bab)
\subfile{chapters/bab01} % Pengantar & Persiapan Lingkungan
\subfile{chapters/bab02} % Tipe Data, Variabel, Input/Output
\subfile{chapters/bab03} % Operator & Ekspresi
\subfile{chapters/bab04} % Struktur Kontrol Kondisional
\subfile{chapters/bab05} % Struktur Kontrol Perulangan & Lainnya
\subfile{chapters/bab06} % Array & Multidimensi
\subfile{chapters/bab07} % String / Karakter & Operasi String
\subfile{chapters/bab08} % Record / Struct --- Tipe Data Terstruktur
\subfile{chapters/bab09} % Pointer --- Penunjuk dan Manajemen Memori
\subfile{chapters/bab10} % Fungsi & Prosedur / Metode
\subfile{chapters/bab11} % Alokasi Dinamis & Pointer Lanjutan
\subfile{chapters/bab12} % File & Operasi I/O Lanjutan
\subfile{chapters/bab13} % Modul / Unit / Header & Manajemen Proyek

\backmatter
\printbibliography
\end{document}
